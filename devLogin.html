<!--
  ~ Copyright 2024 Uppsala University Library
  ~
  ~ This file is part of Cora.
  ~
  ~     Cora is free software: you can redistribute it and/or modify
  ~     it under the terms of the GNU General Public License as published by
  ~     the Free Software Foundation, either version 3 of the License, or
  ~     (at your option) any later version.
  ~
  ~     Cora is distributed in the hope that it will be useful,
  ~     but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~     GNU General Public License for more details.
  ~
  ~     You should have received a copy of the GNU General Public License
  ~     along with Cora.  If not, see <http://www.gnu.org/licenses/>.
  -->
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'>
  <script type="text/javascript">
    window.onload = start;

    const tenMinutes = 1000 * 60 * 10;
    const twentyFourHours = 1000 * 60 * 60 * 24;
    function start() {
      var now = Date.now();
      var validUntil = now + tenMinutes;
      var renewUntil = now + twentyFourHours;
      var authentication = {
        authentication: {
          data: {
            children: [
              {
                name: 'token',
                value: 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa',
              },
              {
                name: 'validUntil',
                value: validUntil.toString(),
              },
              {
                name: 'renewUntil',
                value: renewUntil.toString(),
              },
              {
                name: 'userId',
                value:  '131313',
              },
              {
                name: 'loginId',
                value:  'johdo290@user.uu.se',
              },
              {
                name: 'firstName',
                value:'John',
              },
              {
                name: 'lastName',
                value: 'Doe',
              },
            ],
            name: 'authToken',
          },
          actionLinks: {
            renew: {
              requestMethod: 'POST',
              rel: 'renew',
              url: 'http://localhost:38180/login/rest/authToken/b471b429-0306-4b06-b385-e7de434aa0d8',
              accept: 'application/vnd.uub.authentication+json',
            },
            delete: {
              requestMethod: 'DELETE',
              rel: 'delete',
              url: 'http://localhost:38180/login/rest/authToken/b01dab5e-50eb-492a-b40d-f416500f5e6f',
            },
          },
        },
      }
      if (null != window.opener) {
        window.opener.postMessage(authentication, '*');
        window.opener.focus();
        window.close();
      }
    }
  </script>
<body>
token: 0367365e-1add-4562-bf5e-0ed3d8789cd7
</body>
</html>
